应对高并发的三种策略

* scale-out；
  * 利用集群、数据库一主多从、分库分表等应用方案做横向扩展。
* 缓存；
  * 使用缓存可降低磁盘的读取访问，在内存中实现存储读取，以提升整体性能；
* 异步；
  * 请求转发到消息队列中，释放资源可处理更多的请求。

系统架构不是一蹴而就的，需要不断地根据自身的变化进行迭代优化。不同量级的系统有不同的痛点，也就有不同的架构设计的侧重点。



数据库优化

* 利用池化技术减少连接数据库的耗时，提高频繁创建连接/消耗连接带来的性能问题；
  * 需要关注最小值与最大值，避免最小值过小导致依旧频繁创建连接，也要避免最大值过大导致占用内存过多的问题，避免出现空间过度使用出现内存泄露或者频繁垃圾回收等问题。
* 利用数据库主从分离降低主库的查询，写主库读从库。
  * 需要关注主从延迟的问题，避免主从延迟导致数据查询短时间内没生效的问题；
  * 从库数量不宜过多，3~5个即可。过多的从库需要主库创建更多的log dump线程来处理主从复制的请求，这对主库的资源消耗过高。
* 利用分库分表





缓存层的优化

* 如何保证高可用
  * 客户端方案；
  * 代理层方案；
  * 服务器方案；





消息队列

